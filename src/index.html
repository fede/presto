<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@400;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tauri App</title>
  <script type="module" src="/main.js" defer></script>
</head>

<body>
  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-icons">
      <button class="sidebar-icon active" id="timer-nav" data-view="timer" title="Timer">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
        </svg>
      </button>
      <button class="sidebar-icon" id="calendar-nav" data-view="calendar" title="Calendar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5" />
        </svg>
      </button>
    </div>

    <div class="sidebar-bottom">
      <button class="sidebar-icon-large" id="settings-nav" data-view="settings" title="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round"
            d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a6.759 6.759 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
        </svg>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <!-- Timer View -->
    <div class="view-container" id="timer-view">
      <!-- Progress Dots -->
      <div class="progress-dots" id="progress-dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>

      <!-- Status Label -->
      <div style="text-align:center">
        <div class="timer-status" id="timer-status">
          <svg id="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443a55.381 55.381 0 0 1 5.25 2.882V15" />
          </svg>
          <span id="status-text">Focus</span>
        </div>
      </div>

      <!-- Timer Display -->
      <div class="timer-container">
        <div class="timer-minutes" id="timer-minutes">25</div>
        <div class="timer-seconds" id="timer-seconds">00</div>
      </div>

      <!-- Control Buttons -->
      <div class="controls">
        <button id="stop-btn" class="control-btn">
          <svg id="stop-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
          <svg id="undo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" style="display: none;">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l-2-2m0 0l2-2m-2 2h10.5a4.5 4.5 0 110 9h-4" />
          </svg>
        </button>
        <button id="play-pause-btn" class="control-btn primary">
          <svg id="play-icon" viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd"
              d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653Z"
              clip-rule="evenodd" />
          </svg>
          <svg id="pause-icon" viewBox="0 0 24 24" fill="currentColor" style="display: none;">
            <path fill-rule="evenodd"
              d="M6.75 5.25a.75.75 0 0 1 .75-.75H9a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H7.5a.75.75 0 0 1-.75-.75V5.25Zm7.5 0A.75.75 0 0 1 15 4.5h1.5a.75.75 0 0 1 .75.75v13.5a.75.75 0 0 1-.75.75H15a.75.75 0 0 1-.75-.75V5.25Z"
              clip-rule="evenodd" />
          </svg>
        </button>
        <button id="skip-btn" class="control-btn">
          <svg viewBox="0 0 24 24" fill="currentColor">
            <path fill-rule="evenodd"
              d="M4.5 5.653c0-1.427 1.529-2.33 2.779-1.643l11.54 6.347c1.295.712 1.295 2.573 0 3.286L7.28 19.99c-1.25.687-2.779-.217-2.779-1.643V5.653ZM12.75 5.653c0-1.427 1.529-2.33 2.779-1.643l7.108 3.911a1.125 1.125 0 0 1 0 1.958l-7.108 3.911c-1.25.688-2.779-.214-2.779-1.642V5.653Z"
              clip-rule="evenodd" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Calendar View -->
    <div class="view-container hidden" id="calendar-view">
      <h1>Calendar & Statistics</h1>

      <!-- Week Selector -->
      <div class="week-selector">
        <button id="prev-week" class="nav-btn">&lt;</button>
        <div class="week-display">
          <span id="week-range">10 Jun - 16 Jun 2025</span>
        </div>
        <button id="next-week" class="nav-btn">&gt;</button>
      </div>

      <!-- Two Column Layout -->
      <div class="calendar-main-layout">
        <!-- Left Column: Statistics and Daily Chart -->
        <div class="calendar-left-column">
          <!-- Focus Time Summary Card -->
          <div class="focus-summary-card">
            <h3>Focus Summary</h3>
            <div class="focus-stats">
              <div class="focus-stat-item">
                <span class="focus-stat-label">Total Focus Today</span>
                <span class="focus-stat-value" id="total-focus-today">2h 30m</span>
              </div>
              <div class="focus-stat-item">
                <span class="focus-stat-label">Average Focus/Day</span>
                <span class="focus-stat-value" id="avg-focus-day">2h 15m</span>
              </div>
            </div>
          </div>

          <!-- Weekly Sessions Chart -->
          <div class="weekly-chart-card">
            <h3>This Week's Sessions</h3>
            <div class="weekly-chart" id="weekly-chart">
              <!-- Will be filled by JavaScript with daily session bars -->
            </div>
            <div class="week-days-labels">
              <span>Mon</span>
              <span>Tue</span>
              <span>Wed</span>
              <span>Thu</span>
              <span>Fri</span>
              <span>Sat</span>
              <span>Sun</span>
            </div>
          </div>

          <!-- Daily Development Chart -->
          <div class="daily-chart-card">
            <h3>Today's Development</h3>
            <div class="daily-chart" id="daily-chart">
              <!-- Will be filled by JavaScript with hourly focus time bars -->
            </div>
            <div class="chart-legend">
              <span class="legend-item">
                <span class="legend-color focus"></span>
                Focus sessions
              </span>
              <span class="legend-item">
                <span class="legend-color break"></span>
                Break time
              </span>
            </div>
          </div>
        </div>

        <!-- Right Column: Calendar -->
        <div class="calendar-right-column">
          <div class="mini-calendar-container">
            <div class="calendar-header">
              <button id="prev-month" class="nav-btn">&lt;</button>
              <h3 id="current-month">June 2025</h3>
              <button id="next-month" class="nav-btn">&gt;</button>
            </div>
            <div class="calendar-grid" id="calendar-grid">
              <!-- Will be filled by JavaScript -->
            </div>

            <!-- Session Details for Selected Day -->
            <div class="selected-day-details" id="selected-day-details">
              <div class="sessions-header">
                <h4 id="selected-day-title">Today's Sessions</h4>
                <button class="add-session-btn" id="add-session-btn" title="Add Session">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
                  </svg>
                </button>
              </div>
              <!-- Timeline Container -->
              <div class="sessions-timeline" id="sessions-timeline">
                <!-- Timeline Hours -->
                <div class="timeline-hours" id="timeline-hours">
                  <!-- Will be filled by JavaScript with hour markers -->
                </div>
                <!-- Timeline Track -->
                <div class="timeline-track" id="timeline-track">
                  <!-- Will show session blocks positioned by time -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Settings View -->
    <div class="view-container hidden" id="settings-view">
      <h1>Settings</h1>

      <!-- Global Shortcuts Section -->
      <div class="settings-section">
        <h2>Global Shortcuts</h2>
        <p class="settings-description">Configure keyboard shortcuts that work even when the app is in the background
        </p>

        <div class="shortcut-item">
          <label for="start-stop-shortcut">Start/Stop Timer:</label>
          <div class="shortcut-input-container">
            <input type="text" id="start-stop-shortcut" class="shortcut-input" readonly placeholder="Cmd+Alt+S"
              value="Cmd+Alt+S">
            <button class="shortcut-clear" onclick="clearShortcut('start-stop')">×</button>
          </div>
        </div>

        <div class="shortcut-item">
          <label for="reset-shortcut">Delete Session / Undo:</label>
          <div class="shortcut-input-container">
            <input type="text" id="reset-shortcut" class="shortcut-input" readonly placeholder="Click to set shortcut">
            <button class="shortcut-clear" onclick="clearShortcut('reset')">×</button>
          </div>
        </div>

        <div class="shortcut-item">
          <label for="skip-shortcut">Save Session:</label>
          <div class="shortcut-input-container">
            <input type="text" id="skip-shortcut" class="shortcut-input" readonly placeholder="Click to set shortcut">
            <button class="shortcut-clear" onclick="clearShortcut('skip')">×</button>
          </div>
        </div>
      </div>

      <!-- Timer Settings Section -->
      <div class="settings-section">
        <h2>Timer Settings</h2>

        <div class="setting-item">
          <label for="focus-duration">Focus Duration (minutes):</label>
          <input type="number" id="focus-duration" min="1" max="60" value="25">
        </div>

        <div class="setting-item">
          <label for="break-duration">Short Break (minutes):</label>
          <input type="number" id="break-duration" min="1" max="30" value="5">
        </div>

        <div class="setting-item">
          <label for="long-break-duration">Long Break (minutes):</label>
          <input type="number" id="long-break-duration" min="1" max="60" value="20">
        </div>

        <div class="setting-item">
          <label for="total-sessions">Daily Sessions:</label>
          <input type="number" id="total-sessions" min="1" max="20" value="10">
        </div>
      </div>

      <!-- Weekly Goals Section -->
      <div class="settings-section">
        <h2>Weekly Goals</h2>
        <p class="settings-description">Set your weekly focus time target. Saturday and Sunday are excluded from the
          calculation.</p>

        <div class="setting-item">
          <label for="weekly-goal-minutes">Weekly Goal (minutes):</label>
          <input type="number" id="weekly-goal-minutes" min="30" max="2400" value="125" step="5">
          <p class="setting-description">Target focus time for Monday through Friday (default: 125 minutes = 5 sessions
            of 25 minutes)</p>
        </div>
      </div>

      <!-- Notifications Section -->
      <div class="settings-section">
        <h2>Notifications</h2>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="desktop-notifications" checked>
            <span class="checkmark"></span>
            Desktop Notifications
          </label>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="sound-notifications" checked>
            <span class="checkmark"></span>
            Sound Notifications
          </label>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="auto-start-breaks" checked>
            <span class="checkmark"></span>
            Auto-start Breaks
          </label>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="smart-pause">
            <span class="checkmark"></span>
            Smart Pause (Auto-pause when inactive)
          </label>
          <p class="setting-description">Automatically pause the timer during focus sessions when no mouse or keyboard
            activity is detected, and resume when activity resumes. Only works during focus periods, not breaks.</p>
        </div>

        <div class="setting-item" id="smart-pause-timeout-setting">
          <label for="smart-pause-timeout">Inactivity Timeout: <span id="timeout-value">30</span> seconds</label>
          <input type="range" id="smart-pause-timeout" min="5" max="120" value="30" step="5">
          <div class="slider-labels">
            <span>5s</span>
            <span>2min</span>
          </div>
        </div>
      </div>

      <!-- Danger Zone -->
      <div class="settings-section danger-zone">
        <h2>⚠️ Danger Zone</h2>
        <p class="settings-description">These actions are irreversible and will permanently delete your data.</p>

        <div class="danger-actions">
          <button class="btn-danger" id="reset-all-data-btn">
            🗑️ Reset All Data
          </button>
          <p class="danger-description">
            This will permanently delete all your Pomodoro sessions, tasks, statistics, and reset all settings to
            default. This action cannot be undone.
          </p>
        </div>
      </div>

      <!-- Actions -->
      <div class="settings-actions">
        <div class="auto-save-info">
          <span class="auto-save-text">✓ Settings are saved automatically</span>
        </div>
        <button class="btn-secondary">Reset to Defaults</button>
      </div>
    </div>
  </main>

  <!-- Session Edit Modal -->
  <div class="modal-overlay" id="session-modal-overlay">
    <div class="session-modal" id="session-modal">
      <div class="modal-header">
        <h3 id="session-modal-title">Add Session</h3>
        <button class="modal-close-btn" id="close-session-modal">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      <form class="session-form" id="session-form">
        <div class="form-group">
          <label for="session-type">Session Type</label>
          <select id="session-type" name="type">
            <option value="focus">Focus Session (25m)</option>
            <option value="break">Short Break (5m)</option>
            <option value="longBreak">Long Break (20m)</option>
            <option value="custom">Custom Duration</option>
          </select>
        </div>
        <div class="form-group" id="custom-duration-group" style="display: none;">
          <label for="session-duration">Duration (minutes)</label>
          <input type="number" id="session-duration" name="duration" min="1" max="120" value="25">
        </div>
        <div class="form-group">
          <label for="session-start-time">Start Time</label>
          <input type="time" id="session-start-time" name="startTime" required>
        </div>
        <div class="form-group">
          <label for="session-notes">Notes (optional)</label>
          <input type="text" id="session-notes" name="notes" placeholder="What did you work on?">
        </div>
        <div class="modal-actions">
          <button type="button" class="btn-secondary" id="cancel-session-btn">Cancel</button>
          <button type="button" class="btn-danger" id="delete-session-btn" style="display: none;">Delete</button>
          <button type="submit" class="btn-primary" id="save-session-btn">Save Session</button>
        </div>
      </form>
    </div>
  </div>

</body>

</html>