<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@400;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tauri App</title>
  <script type="module" src="/main.js" defer></script>
</head>

<body>
  <!-- Sidebar -->
  <nav class="sidebar">
    <div class="sidebar-icons">
      <button class="sidebar-icon active" id="timer-nav" data-view="timer" title="Timer">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10" />
          <polyline points="12,6 12,12 16,14" />
        </svg>
      </button>
      <button class="sidebar-icon" id="calendar-nav" data-view="calendar" title="Calendar">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2" />
          <line x1="16" y1="2" x2="16" y2="6" />
          <line x1="8" y1="2" x2="8" y2="6" />
          <line x1="3" y1="10" x2="21" y2="10" />
        </svg>
      </button>
      <button class="sidebar-icon" id="settings-nav" data-view="settings" title="Settings">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="3" />
          <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1m15.5-3.5L19 12l-2.5 2.5M5 17l2.5-2.5L5 12l2.5-2.5" />
        </svg>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="container">
    <!-- Timer View -->
    <div class="view-container" id="timer-view">
      <!-- Progress Dots -->
      <div class="progress-dots" id="progress-dots">
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </div>

      <!-- Status Label -->
      <div style="text-align:center">
        <div class="timer-status" id="timer-status">
          <svg id="status-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
            <!-- Brain icon for Focus -->
            <path
              d="M9.5 2A2.5 2.5 0 0 0 7 4.5v1A2.5 2.5 0 0 0 4.5 8H4a2 2 0 0 0-2 2v1a2 2 0 0 0 2 2h.5A2.5 2.5 0 0 0 7 15.5v1A2.5 2.5 0 0 0 9.5 19h5a2.5 2.5 0 0 0 2.5-2.5v-1A2.5 2.5 0 0 0 19.5 13H20a2 2 0 0 0 2-2v-1a2 2 0 0 0-2-2h-.5A2.5 2.5 0 0 0 17 5.5v-1A2.5 2.5 0 0 0 14.5 2h-5Z" />
          </svg>
          <span id="status-text">Focus</span>
        </div>
      </div>

      <!-- Timer Display -->
      <div class="timer-container">
        <div class="timer-minutes" id="timer-minutes">25</div>
        <div class="timer-seconds" id="timer-seconds">00</div>
      </div>

      <!-- Control Buttons -->
      <div class="controls">
        <button id="menu-btn" class="control-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="1" />
            <circle cx="19" cy="12" r="1" />
            <circle cx="5" cy="12" r="1" />
          </svg>
        </button>
        <button id="play-pause-btn" class="control-btn primary">
          <svg id="play-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5,3 19,12 5,21" />
          </svg>
          <svg id="pause-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
            style="display: none;">
            <rect x="6" y="4" width="4" height="16" />
            <rect x="14" y="4" width="4" height="16" />
          </svg>
        </button>
        <button id="skip-btn" class="control-btn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polygon points="5,4 15,12 5,20" />
            <polygon points="15,4 25,12 15,20" />
          </svg>
        </button>
      </div>
    </div>

    <!-- Calendar View -->
    <div class="view-container hidden" id="calendar-view">
      <h1>Calendar & Statistics</h1>

      <!-- Monthly Calendar -->
      <div class="calendar-container">
        <div class="calendar-header">
          <button id="prev-month" class="nav-btn">&lt;</button>
          <h2 id="current-month">June 2025</h2>
          <button id="next-month" class="nav-btn">&gt;</button>
        </div>
        <div class="calendar-grid" id="calendar-grid">
          <!-- Will be filled by JavaScript -->
        </div>
      </div>

      <!-- Daily Details -->
      <div class="daily-details" id="daily-details">
        <h3>Today's Details</h3>
        <div class="day-stats">
          <div class="stat-item">
            <span class="stat-label">Pomodoros Completed</span>
            <span class="stat-value" id="day-pomodoros">0</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Focus Time</span>
            <span class="stat-value" id="day-focus-time">0h 0m</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">Break Time</span>
            <span class="stat-value" id="day-break-time">0h 0m</span>
          </div>
        </div>
      </div>

      <!-- Weekly Summary -->
      <div class="weekly-summary">
        <h3>This Week</h3>
        <div class="week-chart" id="week-chart">
          <!-- Will be filled by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Settings View -->
    <div class="view-container hidden" id="settings-view">
      <h1>Settings</h1>

      <!-- Global Shortcuts Section -->
      <div class="settings-section">
        <h2>Global Shortcuts</h2>
        <p class="settings-description">Configure keyboard shortcuts that work even when the app is in the background
        </p>

        <div class="shortcut-item">
          <label for="start-stop-shortcut">Start/Stop Timer:</label>
          <div class="shortcut-input-container">
            <input type="text" id="start-stop-shortcut" class="shortcut-input" readonly placeholder="Cmd+Alt+S"
              value="Cmd+Alt+S">
            <button class="shortcut-clear" onclick="clearShortcut('start-stop')">×</button>
          </div>
        </div>

        <div class="shortcut-item">
          <label for="reset-shortcut">Reset Timer:</label>
          <div class="shortcut-input-container">
            <input type="text" id="reset-shortcut" class="shortcut-input" readonly placeholder="Click to set shortcut">
            <button class="shortcut-clear" onclick="clearShortcut('reset')">×</button>
          </div>
        </div>

        <div class="shortcut-item">
          <label for="skip-shortcut">Skip Session:</label>
          <div class="shortcut-input-container">
            <input type="text" id="skip-shortcut" class="shortcut-input" readonly placeholder="Click to set shortcut">
            <button class="shortcut-clear" onclick="clearShortcut('skip')">×</button>
          </div>
        </div>
      </div>

      <!-- Timer Settings Section -->
      <div class="settings-section">
        <h2>Timer Settings</h2>

        <div class="setting-item">
          <label for="focus-duration">Focus Duration (minutes):</label>
          <input type="number" id="focus-duration" min="1" max="60" value="25">
        </div>

        <div class="setting-item">
          <label for="break-duration">Short Break (minutes):</label>
          <input type="number" id="break-duration" min="1" max="30" value="5">
        </div>

        <div class="setting-item">
          <label for="long-break-duration">Long Break (minutes):</label>
          <input type="number" id="long-break-duration" min="1" max="60" value="20">
        </div>

        <div class="setting-item">
          <label for="total-sessions">Daily Sessions:</label>
          <input type="number" id="total-sessions" min="1" max="20" value="10">
        </div>
      </div>

      <!-- Notifications Section -->
      <div class="settings-section">
        <h2>Notifications</h2>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="desktop-notifications" checked>
            <span class="checkmark"></span>
            Desktop Notifications
          </label>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="sound-notifications" checked>
            <span class="checkmark"></span>
            Sound Notifications
          </label>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="auto-start-breaks" checked>
            <span class="checkmark"></span>
            Auto-start Breaks
          </label>
        </div>

        <div class="setting-item">
          <label class="checkbox-label">
            <input type="checkbox" id="smart-pause">
            <span class="checkmark"></span>
            Smart Pause (Auto-pause when inactive)
          </label>
          <p class="setting-description">Automatically pause the timer during focus sessions when no mouse or keyboard
            activity is detected, and resume when activity resumes. Only works during focus periods, not breaks.</p>
        </div>

        <div class="setting-item" id="smart-pause-timeout-setting">
          <label for="smart-pause-timeout">Inactivity Timeout: <span id="timeout-value">30</span> seconds</label>
          <input type="range" id="smart-pause-timeout" min="5" max="120" value="30" step="5">
          <div class="slider-labels">
            <span>5s</span>
            <span>2min</span>
          </div>
        </div>
      </div>

      <!-- Danger Zone -->
      <div class="settings-section danger-zone">
        <h2>⚠️ Danger Zone</h2>
        <p class="settings-description">These actions are irreversible and will permanently delete your data.</p>

        <div class="danger-actions">
          <button class="btn-danger" id="reset-all-data-btn">
            🗑️ Reset All Data
          </button>
          <p class="danger-description">
            This will permanently delete all your Pomodoro sessions, tasks, statistics, and reset all settings to
            default. This action cannot be undone.
          </p>
        </div>
      </div>

      <!-- Actions -->
      <div class="settings-actions">
        <button class="btn-primary">Save Settings</button>
        <button class="btn-secondary">Reset to Defaults</button>
      </div>
    </div>
  </main>
</body>

</html>